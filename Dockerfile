FROM node:18-alpine

# Указываем рабочую директорию внутри контейнера
WORKDIR /app

# Сначала копируем только файлы зависимостей (для ускорения сборки)
COPY package*.json ./

# Устанавливаем библиотеки
RUN npm install

# ТЕПЕРЬ КОПИРУЕМ ВСЕ ОСТАЛЬНЫЕ ФАЙЛЫ (server.js, папку public и т.д.)
COPY . .

# Открываем порт
EXPOSE 3000

# Запускаем сервер
CMD ["node", "server.js"]